# THIS FILE HAS BEEN GENERATED BY CHEF
# ANY MANUAL MODIFICATIONS WILL BE OVERWRITTEN

description "MongoDB"

limit nofile <%= node[:mongodb][:nofile] %>

kill timeout <%= node[:mongodb][:timeout] %> # wait this many seconds between SIGTERM and SIGKILL.

pre-start script
  mkdir -p <%= node[:mongodb][:dbpath] %>
  mkdir -p <%= node[:mongodb][:logpath] %>
end script

start on runlevel [2345]
stop on runlevel [06]

respawn
respawn limit 10 5

script
  exec sudo -u mongodb /usr/bin/mongod -f /etc/mongodb.conf
end script
